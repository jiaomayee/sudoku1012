# 数独游戏软件开发规则

## 1. 代码编写规范

### 1.1 命名规范
- **Python变量命名**: 使用下划线分隔(snake_case)，变量名应清晰表达其用途
- **Python函数命名**: 使用下划线分隔，函数名应使用动词开头
- **Python类命名**: 使用帕斯卡命名法(PascalCase)
- **Python模块命名**: 使用小写字母，避免使用下划线
- **JavaScript变量命名**: 使用驼峰命名法(camelCase)
- **JavaScript函数命名**: 使用驼峰命名法，函数名应使用动词开头
- **JavaScript类命名**: 使用帕斯卡命名法
- **常量命名**: 使用全大写字母，单词间用下划线分隔
- **文件名**: 文件名应与主要功能或类名对应，Python使用小写和下划线，JavaScript使用小写和连字符

### 1.2 代码结构
- Python代码使用4个空格进行缩进
- JavaScript代码使用2个空格进行缩进
- 每个函数不超过50行代码
- 每行代码不超过100个字符
- 空行使用规则：函数间使用2个空行，代码块间使用1个空行
- 类定义之间使用2个空行

### 1.3 注释规范
- **Python文档字符串**: 必须使用三引号，包含功能描述、参数说明、返回值说明和异常说明
- **JavaScript注释**: 使用JSDoc格式的注释
- **算法注释**: 数独技巧算法必须有详细的算法原理、复杂度分析和使用场景说明
- **行注释**: 关键逻辑或难以理解的代码行添加注释
- **注释语言**: 统一使用中文

### 1.4 Python特定规范
- 遵循PEP 8编码规范
- 使用类型注解提高代码可读性
- 使用上下文管理器管理资源
- 避免使用全局变量
- 异常处理必须具体，避免使用裸except

### 1.5 技巧算法规范
- 每个数独技巧必须作为独立模块实现
- 技巧算法必须包含：检测逻辑、应用逻辑、解释生成器
- 必须提供技巧算法的单元测试和性能测试
- 技巧实现必须包含难度评级和复杂度分析

## 2. 开发流程规则

### 2.1 分支管理
- `main`: 稳定版本分支，只接受测试通过的合并
- `develop`: 开发分支，功能开发基于此分支
- `feature/*`: 新功能开发分支
- `feature/skill-*`: 特定数独技巧实现分支
- `bugfix/*`: Bug修复分支
- `docs/*`: 文档更新分支

### 2.2 提交规范
- 提交信息必须包含: 类型: 简短描述
- 类型包括: feat(新功能), fix(修复), docs(文档), style(格式), refactor(重构), test(测试), algo(算法改进)
- 技巧算法提交必须包含技巧名称和版本信息
- 每次提交应专注于单一功能或修复

### 2.3 代码审查规则
- 所有代码修改必须经过至少一人审查
- 审查要点: 代码质量、功能实现、性能影响、潜在风险
- 算法代码必须经过算法专家审查
- 审查流程: 创建PR -> 代码审查 -> 修正问题 -> 合并

## 3. 安全规则

### 3.1 输入验证
- 所有用户输入必须进行验证
- 数字输入范围检查(1-9)
- 防止SQL注入攻击
- API参数类型和范围验证

### 3.2 错误处理
- 全局错误处理器捕获未处理异常
- 详细记录错误信息，但向用户显示友好提示
- 敏感信息不记录到错误日志
- Python异常必须分类处理

### 3.3 数据安全
- 数据库连接使用参数化查询
- 敏感配置信息使用环境变量
- API认证使用令牌机制
- 避免在控制台输出敏感信息

## 4. 质量保障规则

### 4.1 测试要求
- 核心算法必须有单元测试
- 新功能开发必须包含相应测试用例
- 技巧算法必须有专门的测试用例集
- 测试覆盖率目标: 核心代码>95%，API接口>90%，前端关键功能>80%
- 必须进行边界条件测试

### 4.2 性能要求
- 数独生成时间<0.5秒
- 技巧识别时间<0.1秒
- API响应时间<0.5秒
- 页面加载时间<2秒
- 操作响应时间<100毫秒

### 4.3 可维护性要求
- 代码模块化，功能单一
- 避免重复代码，提取公共函数
- 接口设计清晰，易于扩展
- 依赖管理使用requirements.txt管理Python依赖
- 前端依赖使用package.json管理

## 5. 协作规则

### 5.1 沟通规范
- 问题使用统一平台记录和跟踪
- 重要决策在项目文档中记录
- 每日更新工作进度
- 技巧算法实现前进行算法设计评审

### 5.2 文档更新
- 代码修改后必须同步更新相关文档
- 文档格式统一，使用Markdown
- 保持文档的时效性和准确性
- 数独技巧必须有对应的教学文档和示例

## 6. 紧急情况处理规则

### 6.1 程序崩溃处理
- 立即保存现场信息(错误日志、状态等)
- 分析崩溃原因，确定修复方案
- 实施修复并进行全面测试
- 避免未经充分测试的修复发布

### 6.2 回滚机制
- 保留最近3个稳定版本
- 建立快速回滚流程
- 回滚后进行全面功能验证

## 7. 禁止事项

- 禁止未经测试直接提交到主分支
- 禁止删除或修改他人代码而不通知
- 禁止在工作时间进行无关开发活动
- 禁止使用未经验证的第三方库
- 禁止在代码中添加未经批准的功能
- 禁止修改技巧算法而不更新对应的测试用例
- 禁止在生产环境中进行调试