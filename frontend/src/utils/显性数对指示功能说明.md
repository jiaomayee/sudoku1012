# 显性数对指示功能说明

## 概述

为了满足您为不同技巧机会创建独立技巧指示功能的需求，我们为显性数对法（Naked Pair）创建了专门的指示功能，同时保留了原有的通用技巧指示功能作为备份。

## 实现文件

### 1. nakedPairIndicator.js
- **路径**：`src/utils/nakedPairIndicator.js`
- **功能**：专门负责显性数对技巧的高亮显示、提示和应用
- **特点**：
  - 使用半透明浅蓝色高亮条件单元格
  - 使用半透明浅绿色高亮目标单元格
  - 数对候选数使用半透明蓝底白字高亮
  - 需要删除的候选数使用半透明红底白字高亮
  - 专门处理显性数对的逻辑

### 2. NakedPairOverlay.jsx
- **路径**：`src/components/NakedPairOverlay.jsx`
- **功能**：专门用于显性数对技巧的视觉指示覆盖层组件
- **特点**：
  - 专门为显性数对法设计的视觉样式
  - 条件单元格使用半透明浅蓝色底色
  - 目标单元格使用半透明浅绿色底色
  - 数对候选数使用半透明蓝底白字高亮，确保在单元格底色上方显示
  - 候选数高亮完全在单元格内部，不会突出到单元格外
  - 避免与通用技巧覆盖层重复渲染候选数高亮
  - 与主技巧覆盖层组件分离，可独立调试
  - 支持竖屏和横屏模式

### 3. TechniqueOverlay.jsx
- **路径**：`src/components/TechniqueOverlay.jsx`
- **功能**：通用技巧覆盖层组件，负责渲染目标单元格中需要删除的候选数
- **特点**：
  - 渲染所有技巧类型的目标单元格候选数
  - 使用红色背景高亮需要删除的候选数
  - 候选数高亮完全在单元格内部，不会突出到单元格外
  - 改进了候选数定位算法，确保在不同屏幕尺寸下正确显示

### 4. ControlPanel.jsx 更新
- **路径**：`src/components/ControlPanel.jsx`
- **功能**：在技巧高亮处理函数中添加了对显性数对的特殊处理
- **特点**：
  - 识别显性数对技巧类型
  - 使用专门的高亮样式和逻辑
  - 条件单元格使用半透明浅蓝色底色
  - 目标单元格使用半透明浅绿色底色
  - 与原有技巧处理逻辑并存

### 5. SudokuGamePage.jsx 更新
- **路径**：`src/pages/SudokuGamePage.jsx`
- **功能**：添加了新的显性数对覆盖层组件
- **特点**：
  - 在棋盘上方添加专门的显性数对指示层
  - 与其他技巧指示层独立工作

### 6. techniqueManager.js 更新
- **路径**：`src/utils/techniqueManager.js`
- **功能**：添加了获取特定技巧指示器的方法
- **特点**：
  - 可以为不同技巧类型返回不同的指示器实例
  - 支持显性数对法使用专门的指示器

## 颜色方案

### 显性数对法专用颜色
- **条件单元格**：半透明浅蓝色 (rgba(173, 216, 230, 0.6)) 背景
- **目标单元格**：半透明浅绿色 (rgba(144, 238, 144, 0.6)) 背景
- **数对候选数**：半透明蓝色背景 (rgba(0, 0, 255, 0.8)) + 白色文字
- **需要删除的候选数**：红色背景 (#e74c3c) + 白色文字

## 使用方式

1. 当系统识别到显性数对技巧机会时，会自动使用专门的指示功能
2. 显性数对覆盖层会显示在棋盘上方，提供清晰的视觉指示
3. 用户可以独立调试显性数对指示功能，不影响其他技巧的指示

## 高亮规则

### 条件单元格（含有数对的单元格）
- 使用半透明浅蓝色底色高亮整个单元格
- 数对中的候选数使用半透明蓝底白字高亮显示，确保在单元格底色上方

### 目标单元格（需要删除候选数的单元格）
- 使用半透明浅绿色底色高亮整个单元格
- 需要删除的候选数使用红色背景高亮显示，确保在单元格底色上方

### 候选数高亮
- 所有候选数高亮都在单元格内部显示，不会突出到单元格外
- 候选数高亮使用精确的定位算法，确保在3x3网格中正确排列
- 数对候选数的z-index设置确保其显示在单元格底色上方
- 需要删除的候选数由通用技巧覆盖层渲染，确保清晰可见

## 优势

1. **独立性**：显性数对指示功能与原有功能完全独立，可以分别调试和修改
2. **专门性**：为显性数对法设计的专门视觉样式，更易于理解
3. **可扩展性**：为其他技巧创建类似独立指示功能提供了模板
4. **兼容性**：保留了原有功能，确保系统稳定运行
5. **无重复**：避免了候选数高亮的重复显示问题
6. **清晰显示**：候选数高亮清晰可见，不会突出到单元格外
7. **一致性**：条件单元格和目标单元格都使用改进的定位算法

## 后续扩展

可以按照相同模式为其他技巧（如隐性数对、三链数等）创建专门的指示功能。